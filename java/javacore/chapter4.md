# 对象和类

> [!tip] 本章节主要介绍Java中面向对象相关知识，主要关于类的编写和相关使用方法

## 面向对象程序设计概述

面向对象程序设计（OOP）把数据放在第一位，然后再考虑操作数据的算法

### 类

- 类是构造对象的模板和蓝图

- 由类构造对象的过程称为创建类的实例

- 封装：也称为数据隐藏，将数据和行为组合在一个包中
- 封装思想是实现代码重用性和可靠性的关键
- 所有的类都继承于Object

### 对象

对象三个主要特性：行为，状态，标识

### 识别类

### 类之间的关系

常见关系有：

- 依赖：一个类的方法使用/操控另一个类对象
- 聚合：一个对象包含另一个对象
- 继承：拓展关系

---

## 使用预定义类

### 对象与对象变量

- Java中，使用构造器（构造函数）构造新实例

- 构造器名字应当与类名相同
- **对象变量并没有实际包含一个变量，只是引用一个对象**
- 所有Java对象都存储在堆中

### Java类库中的LocalDate类

类库设计者决定将保存时间和给时间点命名分开，所以有两个类：

- Date：用来表示时间点
- LocalDate：用日历表示法表示日期

> 使用构造LocalDate对象时，应使用静态工厂方法

```java
LocalDate.now();
LocalDate.of(2022,7,26);
```

**LocalDate封装了实例字段来维护设置的日期**

### 更改器方法与访问器方法

- 更改对象状态的方法称为更改器方法
- 只访问对象不更改对象的方法叫访问器方法

---

## 用户自定义类

### 隐式参数和显式参数

一般来说，对于一个对象中的方法，第一个参数为隐式参数，即方法调用的目标或者接收者，可以用this指代，其他的参数为显式参数，即方法后括号中声明的参数

> Java中，所有方法都定义在类的内部，但不意味着这些是内联方法，是否成为内联方法是JVM的任务

### final实例字段

可以将实例字段定义为final，这样必须在构造对象时初始化

注意final修饰基本类型（或者对应的装饰器类型）与修饰对象的区别

---

## 静态字段和静态方法

一般用static修饰符来修饰

### 静态字段

将字段定义为static后，每个类只有一个字段（共享），对于非静态字段，每个对象都有一个副本

即使某一个类没有对象，静态字段也存在，它属于类，不属于任何一个对象

### 静态常量

静态常量相对于静态变量更常用

用`public static final`来修饰

### 静态方法

静态方法是不在对象上执行的方法，所以静态方法没有**隐式参数**

静态方法不能访问实例字段，但能访问静态字段

> 使用静态方法一般有两种情况：
>
> - 方法不需要访问对象状态，因为所有参数都显式提供
> - 方法只需要访问类的静态字段

### 工厂方法

静态方法一个常用用途是静态工厂方法来构造对象，不使用构造器有两个原因：

- 无法命名构造器，构造器名称必须和类名一致，但是有时需要得到两个不同的实例名字
- 使用构造器无法改变构造对象的类型，工厂方法可以返回子类

