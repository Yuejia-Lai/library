<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>基本CRUD与常用注解 | Yuejia-Lai的知识库</title><meta name="description" content="整理记录作者的所学，包括但不限于读书笔记，技术框架，开发难点，刷题记录等">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.0a6fbc0d.css">
    <link rel="modulepreload" href="/assets/app.d6224ea7.js"><link rel="modulepreload" href="/assets/chapter2.html.db08f791.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/chapter2.html.2a06943d.js"><link rel="prefetch" href="/assets/book.html.300eeb61.js"><link rel="prefetch" href="/assets/home.html.40d0e38f.js"><link rel="prefetch" href="/assets/intro.html.10e561d6.js"><link rel="prefetch" href="/assets/language.html.c9d4394d.js"><link rel="prefetch" href="/assets/index.html.c0849ca8.js"><link rel="prefetch" href="/assets/slide.html.0ee51624.js"><link rel="prefetch" href="/assets/index.html.b09278b5.js"><link rel="prefetch" href="/assets/index.html.3fb4acd6.js"><link rel="prefetch" href="/assets/C__.html.bc5104be.js"><link rel="prefetch" href="/assets/Java.html.fa090c39.js"><link rel="prefetch" href="/assets/about.html.1b1356ab.js"><link rel="prefetch" href="/assets/Git.html.9e931630.js"><link rel="prefetch" href="/assets/maven.html.fd22530c.js"><link rel="prefetch" href="/assets/cmd.html.37c21b7f.js"><link rel="prefetch" href="/assets/markdown.html.b5f6fd76.js"><link rel="prefetch" href="/assets/开源协议.html.b8400cc9.js"><link rel="prefetch" href="/assets/chapter1.html.0ce8cc3b.js"><link rel="prefetch" href="/assets/chapter2.html.9476d73c.js"><link rel="prefetch" href="/assets/chapter3.html.4d3083b2.js"><link rel="prefetch" href="/assets/index.html.809df0cc.js"><link rel="prefetch" href="/assets/chapter1.html.fffe7929.js"><link rel="prefetch" href="/assets/chapter2.html.604ec238.js"><link rel="prefetch" href="/assets/index.html.4a605a2e.js"><link rel="prefetch" href="/assets/chapter1.html.b3830823.js"><link rel="prefetch" href="/assets/chapter2.html.599e97e4.js"><link rel="prefetch" href="/assets/chapter3.html.39b0136d.js"><link rel="prefetch" href="/assets/chapter4.html.43276a53.js"><link rel="prefetch" href="/assets/chapter5.html.17d32a6f.js"><link rel="prefetch" href="/assets/chapter6.html.72744862.js"><link rel="prefetch" href="/assets/chapter7.html.667f5ec3.js"><link rel="prefetch" href="/assets/chapter8.html.7a3c65bf.js"><link rel="prefetch" href="/assets/chapter1.html.080588a0.js"><link rel="prefetch" href="/assets/chapter10.html.47f637fa.js"><link rel="prefetch" href="/assets/chapter11.html.20eaf3c1.js"><link rel="prefetch" href="/assets/chapter2.html.242cddd6.js"><link rel="prefetch" href="/assets/chapter3.html.f6f3ecf4.js"><link rel="prefetch" href="/assets/chapter4.html.6c73888e.js"><link rel="prefetch" href="/assets/chapter5.html.c89cc8a2.js"><link rel="prefetch" href="/assets/chapter6.html.e83a2b8e.js"><link rel="prefetch" href="/assets/chapter7.html.f0e707c4.js"><link rel="prefetch" href="/assets/chapter8.html.34896a01.js"><link rel="prefetch" href="/assets/chapter9.html.78d0b66e.js"><link rel="prefetch" href="/assets/chapter1.html.bdaaa35c.js"><link rel="prefetch" href="/assets/chapter2.html.2639fed1.js"><link rel="prefetch" href="/assets/chapter3.html.639b6c09.js"><link rel="prefetch" href="/assets/chapter4.html.3965a7f4.js"><link rel="prefetch" href="/assets/chapter5.html.6f7f8cfb.js"><link rel="prefetch" href="/assets/chapter6.html.9c328f8d.js"><link rel="prefetch" href="/assets/chapter7.html.197e9882.js"><link rel="prefetch" href="/assets/chapter8.html.bdf05845.js"><link rel="prefetch" href="/assets/chapter9.html.4202047f.js"><link rel="prefetch" href="/assets/chapter1.html.084cf7e3.js"><link rel="prefetch" href="/assets/chapter3.html.8cf98da2.js"><link rel="prefetch" href="/assets/chapter4.html.9ca4889b.js"><link rel="prefetch" href="/assets/chapter1.html.b4973c76.js"><link rel="prefetch" href="/assets/chapter2.html.fd9bd255.js"><link rel="prefetch" href="/assets/chapter3.html.1fab7881.js"><link rel="prefetch" href="/assets/chapter4.html.3d96f586.js"><link rel="prefetch" href="/assets/chapter1.html.e35764c1.js"><link rel="prefetch" href="/assets/chapter2.html.d3e74105.js"><link rel="prefetch" href="/assets/chapter3.html.7878ca3f.js"><link rel="prefetch" href="/assets/chapter1.html.2bf65403.js"><link rel="prefetch" href="/assets/chapter2.html.7e1d0d6c.js"><link rel="prefetch" href="/assets/chapter3.html.40ba5ac2.js"><link rel="prefetch" href="/assets/chapter4.html.d3ddec03.js"><link rel="prefetch" href="/assets/chapter5.html.dc9f0f35.js"><link rel="prefetch" href="/assets/chapter6.html.be4aa0ed.js"><link rel="prefetch" href="/assets/chapter7.html.95c78d18.js"><link rel="prefetch" href="/assets/chapter1.html.6e320055.js"><link rel="prefetch" href="/assets/chapter2.html.e229e5cc.js"><link rel="prefetch" href="/assets/chapter1.html.952c4cb3.js"><link rel="prefetch" href="/assets/chapter2.html.f1fb54e8.js"><link rel="prefetch" href="/assets/chapter3.html.aabb694b.js"><link rel="prefetch" href="/assets/chapter4.html.bc822d9c.js"><link rel="prefetch" href="/assets/index.html.b896051e.js"><link rel="prefetch" href="/assets/offer-1.html.3516e76a.js"><link rel="prefetch" href="/assets/offer-2.html.ec9b996f.js"><link rel="prefetch" href="/assets/offer-3.html.d5168824.js"><link rel="prefetch" href="/assets/404.html.f43566f8.js"><link rel="prefetch" href="/assets/book.html.03c6dde4.js"><link rel="prefetch" href="/assets/home.html.ce056caf.js"><link rel="prefetch" href="/assets/intro.html.023fb397.js"><link rel="prefetch" href="/assets/language.html.0ee5ebf3.js"><link rel="prefetch" href="/assets/index.html.f66e188b.js"><link rel="prefetch" href="/assets/slide.html.82101cbc.js"><link rel="prefetch" href="/assets/index.html.cc9a24b7.js"><link rel="prefetch" href="/assets/index.html.e29c8c57.js"><link rel="prefetch" href="/assets/C__.html.12c741bf.js"><link rel="prefetch" href="/assets/Java.html.35037620.js"><link rel="prefetch" href="/assets/about.html.ab8ef979.js"><link rel="prefetch" href="/assets/Git.html.712b5211.js"><link rel="prefetch" href="/assets/maven.html.ea8a25e4.js"><link rel="prefetch" href="/assets/cmd.html.291ed59f.js"><link rel="prefetch" href="/assets/markdown.html.caa8b15f.js"><link rel="prefetch" href="/assets/开源协议.html.e2d862ab.js"><link rel="prefetch" href="/assets/chapter1.html.21513a13.js"><link rel="prefetch" href="/assets/chapter2.html.f7b0745a.js"><link rel="prefetch" href="/assets/chapter3.html.70cba8ec.js"><link rel="prefetch" href="/assets/index.html.5a487c39.js"><link rel="prefetch" href="/assets/chapter1.html.8e36924f.js"><link rel="prefetch" href="/assets/chapter2.html.6a57352e.js"><link rel="prefetch" href="/assets/index.html.ebcdabf0.js"><link rel="prefetch" href="/assets/chapter1.html.75b944b6.js"><link rel="prefetch" href="/assets/chapter2.html.89e6623b.js"><link rel="prefetch" href="/assets/chapter3.html.9c12a987.js"><link rel="prefetch" href="/assets/chapter4.html.08bf7462.js"><link rel="prefetch" href="/assets/chapter5.html.bb9503df.js"><link rel="prefetch" href="/assets/chapter6.html.2387e5c2.js"><link rel="prefetch" href="/assets/chapter7.html.3eb8536f.js"><link rel="prefetch" href="/assets/chapter8.html.816ec9b2.js"><link rel="prefetch" href="/assets/chapter1.html.b59c8515.js"><link rel="prefetch" href="/assets/chapter10.html.aaa61a16.js"><link rel="prefetch" href="/assets/chapter11.html.2201313b.js"><link rel="prefetch" href="/assets/chapter2.html.950b61b2.js"><link rel="prefetch" href="/assets/chapter3.html.c78e4ce6.js"><link rel="prefetch" href="/assets/chapter4.html.d010d64c.js"><link rel="prefetch" href="/assets/chapter5.html.9de61b3a.js"><link rel="prefetch" href="/assets/chapter6.html.54baabc8.js"><link rel="prefetch" href="/assets/chapter7.html.73317d7c.js"><link rel="prefetch" href="/assets/chapter8.html.2ed9d277.js"><link rel="prefetch" href="/assets/chapter9.html.96601b1a.js"><link rel="prefetch" href="/assets/chapter1.html.54930c3d.js"><link rel="prefetch" href="/assets/chapter2.html.bd618ca8.js"><link rel="prefetch" href="/assets/chapter3.html.41c86faf.js"><link rel="prefetch" href="/assets/chapter4.html.95fb5c29.js"><link rel="prefetch" href="/assets/chapter5.html.e5b4865f.js"><link rel="prefetch" href="/assets/chapter6.html.45af0313.js"><link rel="prefetch" href="/assets/chapter7.html.5214d905.js"><link rel="prefetch" href="/assets/chapter8.html.55f43c60.js"><link rel="prefetch" href="/assets/chapter9.html.9fbb5302.js"><link rel="prefetch" href="/assets/chapter1.html.263447fd.js"><link rel="prefetch" href="/assets/chapter3.html.7c4f4f8f.js"><link rel="prefetch" href="/assets/chapter4.html.b168a6c4.js"><link rel="prefetch" href="/assets/chapter1.html.2c500814.js"><link rel="prefetch" href="/assets/chapter2.html.8ef3dc9d.js"><link rel="prefetch" href="/assets/chapter3.html.a3c99bc1.js"><link rel="prefetch" href="/assets/chapter4.html.968448c9.js"><link rel="prefetch" href="/assets/chapter1.html.4c8f41c8.js"><link rel="prefetch" href="/assets/chapter2.html.ac56fee0.js"><link rel="prefetch" href="/assets/chapter3.html.02b95a78.js"><link rel="prefetch" href="/assets/chapter1.html.d27a4f4f.js"><link rel="prefetch" href="/assets/chapter2.html.c344d08e.js"><link rel="prefetch" href="/assets/chapter3.html.93f48133.js"><link rel="prefetch" href="/assets/chapter4.html.f5fa1314.js"><link rel="prefetch" href="/assets/chapter5.html.af761404.js"><link rel="prefetch" href="/assets/chapter6.html.ace6a61b.js"><link rel="prefetch" href="/assets/chapter7.html.d82c0b40.js"><link rel="prefetch" href="/assets/chapter1.html.ec2432fd.js"><link rel="prefetch" href="/assets/chapter2.html.899685a4.js"><link rel="prefetch" href="/assets/chapter1.html.a458931f.js"><link rel="prefetch" href="/assets/chapter2.html.9779b2f0.js"><link rel="prefetch" href="/assets/chapter3.html.0cbafb93.js"><link rel="prefetch" href="/assets/chapter4.html.07bf1bca.js"><link rel="prefetch" href="/assets/index.html.e00edffe.js"><link rel="prefetch" href="/assets/offer-1.html.19383283.js"><link rel="prefetch" href="/assets/offer-2.html.4ff4992c.js"><link rel="prefetch" href="/assets/offer-3.html.c02522d2.js"><link rel="prefetch" href="/assets/404.html.4c5c62e8.js"><link rel="prefetch" href="/assets/404.68acd675.js"><link rel="prefetch" href="/assets/Layout.21453e85.js"><link rel="prefetch" href="/assets/Slide.001926f4.js"><link rel="prefetch" href="/assets/auto.c212967b.js"><link rel="prefetch" href="/assets/index.d8a59108.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.ee1e0284.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/./logo.png" alt="Yuejia-Lai的知识库"><!----><span class="site-name hide-in-pad">Yuejia-Lai的知识库</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/guide/" class="nav-link" aria-label="使用指北"><span class="icon iconfont icon-feedback"></span>使用指北<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习路线"><span class="title"><span class="icon iconfont icon-luxiandaohang"></span>学习路线</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/maps/Java.html" class="nav-link" aria-label="Java后端学习路线"><!---->Java后端学习路线<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="项目"><span class="title"><span class="icon iconfont icon-manage_fill"></span>项目</span><span class="arrow"></span><ul class="nav-dropdown"></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="官方/实用文档"><span class="title"><span class="icon iconfont icon-creativefill"></span>官方/实用文档</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://docs.oracle.com/javase/8/docs/api/" rel="noopener noreferrer" target="_blank" aria-label="Java 8 api_docs" class="nav-link"><!---->Java 8 api_docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/index.html" rel="noopener noreferrer" target="_blank" aria-label="Java 17 api_docs" class="nav-link"><!---->Java 17 api_docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://mvnrepository.com/" rel="noopener noreferrer" target="_blank" aria-label="Maven Repository" class="nav-link"><!---->Maven Repository<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://spring.io/projects" rel="noopener noreferrer" target="_blank" aria-label="Spring系列" class="nav-link"><!---->Spring系列<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://redis.io/docs/" rel="noopener noreferrer" target="_blank" aria-label="Redis" class="nav-link"><!---->Redis<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://developer.mozilla.org/zh-CN/" rel="noopener noreferrer" target="_blank" aria-label="MDN 网络文档" class="nav-link"><!---->MDN 网络文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/me/about.html" class="nav-link" aria-label="关于我"><span class="icon iconfont icon-wangwang"></span>关于我<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Yuejia-Lai/library" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-leetcode1"></span><a href="/leetcode/" class="title">Leetcode刷题记录</a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-computer_fill"></span><a href="/computer/" class="title">计算机基础</a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-data-dictionary"></span><a href="/book.html" class="title">专业书籍阅读</a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-java"></span><span class="title">Java后端</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-data"></span><span class="title">MyBatis</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-bxl-spring-boot"></span><span class="title">Spring</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-bxl-spring-boot"></span><span class="title">SpringMVC</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-manage_fill"></span><span class="title">SSM</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-sharpicons_database-center"></span><span class="title">MyBatis Plus</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/develop/MyBatis%20Plus/chapter1.html" class="nav-link sidebar-link sidebar-page" aria-label="MyBatis-Plus简介与入门案例"><span class="icon iconfont icon-sharpicons_database-center"></span>MyBatis-Plus简介与入门案例<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="基本CRUD与常用注解"><span class="icon iconfont icon-sharpicons_database-center"></span>基本CRUD与常用注解<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#basemapper" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="BaseMapper"><!---->BaseMapper<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#插入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="插入"><!---->插入<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#删除" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删除"><!---->删除<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#通过id批量删除记录" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通过id批量删除记录"><!---->通过id批量删除记录<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#修改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="修改"><!---->修改<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查询"><!---->查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#通用service" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通用Service"><!---->通用Service<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablename" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@TableName"><!---->@TableName<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tableid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@TableId"><!---->@TableId<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablefield" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@TableField"><!---->@TableField<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablelogic" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@TableLogic"><!---->@TableLogic<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/develop/MyBatis%20Plus/chapter3.html" class="nav-link sidebar-link sidebar-page" aria-label="条件构造器与常用接口和插件"><span class="icon iconfont icon-sharpicons_database-center"></span>条件构造器与常用接口和插件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/develop/MyBatis%20Plus/chapter4.html" class="nav-link sidebar-link sidebar-page" aria-label="通用枚举，代码生成器与多数据源配置"><span class="icon iconfont icon-sharpicons_database-center"></span>通用枚举，代码生成器与多数据源配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-bxl-spring-boot"></span><span class="title">SpringBoot</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-gongju"></span><span class="title">开发工具</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-creativefill"></span><span class="title">小知识</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-brand"></span><span class="title">个人项目</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-sharpicons_database-center"></span>基本CRUD与常用注解</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年9月29日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">Yuejia-Lai</span></span><span property="author" content="Yuejia-Lai"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年9月29日</span><meta property="datePublished" content="2022-09-29T00:00:00.000Z"></span><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年9月29日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 13 分钟</span><meta property="timeRequired" content="PT13M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#basemapper" class="router-link-active router-link-exact-active toc-link level2">BaseMapper</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#插入" class="router-link-active router-link-exact-active toc-link level2">插入</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#删除" class="router-link-active router-link-exact-active toc-link level2">删除</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#通过id批量删除记录" class="router-link-active router-link-exact-active toc-link level2">通过id批量删除记录</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#修改" class="router-link-active router-link-exact-active toc-link level2">修改</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#查询" class="router-link-active router-link-exact-active toc-link level2">查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#通用service" class="router-link-active router-link-exact-active toc-link level2">通用Service</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablename" class="router-link-active router-link-exact-active toc-link level2">@TableName</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tableid" class="router-link-active router-link-exact-active toc-link level2">@TableId</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablefield" class="router-link-active router-link-exact-active toc-link level2">@TableField</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/develop/MyBatis%20Plus/chapter2.html#tablelogic" class="router-link-active router-link-exact-active toc-link level2">@TableLogic</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="basemapper" tabindex="-1"><a class="header-anchor" href="#basemapper" aria-hidden="true">#</a> BaseMapper</h2><p>MyBatis-Plus中的基本CRUD在内置的BaseMapper中都已得到了实现，我们可以直接使用，接口如 下：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Mapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
    * 插入一条记录
    * <span class="token keyword">@param</span> <span class="token parameter">entity</span> 实体对象
    */</span>
    <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 ID 删除
    * <span class="token keyword">@param</span> <span class="token parameter">id</span> 主键ID
    */</span>
    <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据实体(ID)删除
    * <span class="token keyword">@param</span> <span class="token parameter">entity</span> 实体对象
    * <span class="token keyword">@since</span> 3.4.4
    */</span>
    <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 columnMap 条件，删除记录
    * <span class="token keyword">@param</span> <span class="token parameter">columnMap</span> 表字段 map 对象
    */</span>
    <span class="token keyword">int</span> <span class="token function">deleteByMap</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>COLUMN_MAP<span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> columnMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 entity 条件，删除记录
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null,里面的 entity 用于生成 where
    语句）
    */</span>
    <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 删除（根据ID 批量删除）
    * <span class="token keyword">@param</span> <span class="token parameter">idList</span> 主键ID列表(不能为 null 以及 empty)
    */</span>
    <span class="token keyword">int</span> <span class="token function">deleteBatchIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>COLLECTION<span class="token punctuation">)</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span>
    <span class="token class-name">Serializable</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 ID 修改
    * <span class="token keyword">@param</span> <span class="token parameter">entity</span> 实体对象
    */</span>
    <span class="token keyword">int</span> <span class="token function">updateById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>ENTITY<span class="token punctuation">)</span> <span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 whereEntity 条件，更新记录
    * <span class="token keyword">@param</span> <span class="token parameter">entity</span> 实体对象 (set 条件值,可以为 null)
    * <span class="token keyword">@param</span> <span class="token parameter">updateWrapper</span> 实体对象封装操作类（可以为 null,里面的 entity 用于生成
    where 语句）
    */</span>
    <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>ENTITY<span class="token punctuation">)</span> <span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> updateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 ID 查询
    * <span class="token keyword">@param</span> <span class="token parameter">id</span> 主键ID
    */</span>
    <span class="token class-name">T</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 查询（根据ID 批量查询）
    * <span class="token keyword">@param</span> <span class="token parameter">idList</span> 主键ID列表(不能为 null 以及 empty)
    */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectBatchIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>COLLECTION<span class="token punctuation">)</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 查询（根据 columnMap 条件）
    * <span class="token keyword">@param</span> <span class="token parameter">columnMap</span> 表字段 map 对象
    */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByMap</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>COLUMN_MAP<span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> columnMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 entity 条件，查询一条记录
    * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>查询一条记录，例如 qw.last(&quot;limit 1&quot;) 限制取一条记录, 注意：多条数据会报异常
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token keyword">default</span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> ts <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>ts<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ts<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token class-name">ExceptionUtils</span><span class="token punctuation">.</span><span class="token function">mpe</span><span class="token punctuation">(</span><span class="token string">&quot;One record is expected, but the query result is multiple records&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ts<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
    * 根据 Wrapper 条件，查询总记录数
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token class-name">Long</span> <span class="token function">selectCount</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 entity 条件，查询全部记录
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 Wrapper 条件，查询全部记录
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMaps</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 Wrapper 条件，查询全部记录
    * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>注意： 只返回第一个字段的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectObjs</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 entity 条件，查询全部记录（并翻页）
    * <span class="token keyword">@param</span> <span class="token parameter">page</span> 分页查询条件（可以为 RowBounds.DEFAULT）
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类（可以为 null）
    */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span> <span class="token keyword">extends</span> <span class="token class-name">IPage</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">P</span> <span class="token function">selectPage</span><span class="token punctuation">(</span><span class="token class-name">P</span> page<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
    * 根据 Wrapper 条件，查询全部记录（并翻页）
    * <span class="token keyword">@param</span> <span class="token parameter">page</span> 分页查询条件
    * <span class="token keyword">@param</span> <span class="token parameter">queryWrapper</span> 实体对象封装操作类
    */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">P</span> <span class="token keyword">extends</span> <span class="token class-name">IPage</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">P</span> <span class="token function">selectMapsPage</span><span class="token punctuation">(</span><span class="token class-name">P</span> page<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>WRAPPER<span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
                         <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插入" tabindex="-1"><a class="header-anchor" href="#插入" aria-hidden="true">#</a> 插入</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan@atguigu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//INSERT INTO user ( id, name, age, email ) VALUES ( ?, ?, ?, ? )</span>
	<span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响行数：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//1475754982694199298</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id自动获取：&quot;</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>最终执行的结果，所获取的id为1475754982694199298</p><p>这是因为MyBatis-Plus在实现插入数据时，会默认基于雪花算法的策略生成id</p></blockquote><h2 id="删除" tabindex="-1"><a class="header-anchor" href="#删除" aria-hidden="true">#</a> 删除</h2><h3 id="通过id删除记录" tabindex="-1"><a class="header-anchor" href="#通过id删除记录" aria-hidden="true">#</a> 通过id删除记录</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//通过id删除用户信息</span>
	<span class="token comment">//DELETE FROM user WHERE id=?</span>
	<span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1475754982694199298L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响行数：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过id批量删除记录" tabindex="-1"><a class="header-anchor" href="#通过id批量删除记录" aria-hidden="true">#</a> 通过id批量删除记录</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteBatchIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//通过多个id批量删除</span>
	<span class="token comment">//DELETE FROM user WHERE id IN ( ? , ? , ? )</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token number">2L</span><span class="token punctuation">,</span> <span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">deleteBatchIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响行数：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过map条件删除记录" tabindex="-1"><a class="header-anchor" href="#通过map条件删除记录" aria-hidden="true">#</a> 通过map条件删除记录</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//根据map集合中所设置的条件删除记录</span>
	<span class="token comment">//DELETE FROM user WHERE name = ? AND age = ?</span>
	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">deleteByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响行数：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改" tabindex="-1"><a class="header-anchor" href="#修改" aria-hidden="true">#</a> 修改</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//UPDATE user SET name=?, age=? WHERE id=?</span>
	<span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响行数：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查询" tabindex="-1"><a class="header-anchor" href="#查询" aria-hidden="true">#</a> 查询</h2><h3 id="根据id查询用户信息" tabindex="-1"><a class="header-anchor" href="#根据id查询用户信息" aria-hidden="true">#</a> 根据id查询用户信息</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//根据id查询用户信息</span>
	<span class="token comment">//SELECT id,name,age,email FROM user WHERE id=?</span>
	<span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="根据多个id查询多个用户信息" tabindex="-1"><a class="header-anchor" href="#根据多个id查询多个用户信息" aria-hidden="true">#</a> 根据多个id查询多个用户信息</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectBatchIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//根据多个id查询多个用户信息</span>
	<span class="token comment">//SELECT id,name,age,email FROM user WHERE id IN ( ? , ? )</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">,</span> <span class="token number">5L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectBatchIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过map条件查询用户信息" tabindex="-1"><a class="header-anchor" href="#通过map条件查询用户信息" aria-hidden="true">#</a> 通过map条件查询用户信息</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//通过map条件查询用户信息</span>
	<span class="token comment">//SELECT id,name,age,email FROM user WHERE name = ? AND age = ?</span>
	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
	list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询所有数据" tabindex="-1"><a class="header-anchor" href="#查询所有数据" aria-hidden="true">#</a> 查询所有数据</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//查询所有用户信息</span>
	<span class="token comment">//SELECT id,name,age,email FROM user</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>通过观察BaseMapper中的方法，大多方法中都有Wrapper类型的形参，此为条件构造器，可针对于SQL语句设置不同的条件，若没有条件，则可以为该形参赋值null，即查询（删除/修改）所有数据</p></blockquote><h2 id="通用service" tabindex="-1"><a class="header-anchor" href="#通用service" aria-hidden="true">#</a> 通用Service</h2><blockquote><p>说明:</p><ul><li>通用 Service CRUD 封装IService接口，进一步封装 CRUD 采用 get 查询单行 remove 删 除 list 查询集合 page 分页 前缀命名方式区分 Mapper 层避免混淆，</li><li>泛型 T 为任意实体对象</li><li>建议如果存在自定义通用 Service 方法的可能，请创建自己的 IBaseService 继承 Mybatis-Plus 提供的基类</li><li>官网地址：<a href="https://baomidou.com/pages/49cc81/#service-crud-%E6%8E%A5%E5%8F%25" target="_blank" rel="noopener noreferrer">https://baomidou.com/pages/49cc81/#service-crud-接��%<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> A3</li></ul></blockquote><h3 id="iservice" tabindex="-1"><a class="header-anchor" href="#iservice" aria-hidden="true">#</a> IService</h3><p>MyBatis-Plus中有一个接口 IService和其实现类 ServiceImpl，封装了常见的业务层逻辑</p><p>详情查看源码IService和ServiceImpl</p><h3 id="创建service接口和实现类" tabindex="-1"><a class="header-anchor" href="#创建service接口和实现类" aria-hidden="true">#</a> 创建Service接口和实现类</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
* UserService继承IService模板提供的基础功能
*/</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* ServiceImpl实现了IService，提供了IService中基础功能的实现
* 若ServiceImpl无法满足业务需求，则可以使用自定的UserService定义方法，并在实现类中实现
*/</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试查询记录数" tabindex="-1"><a class="header-anchor" href="#测试查询记录数" aria-hidden="true">#</a> 测试查询记录数</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">long</span> count <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;总记录数：&quot;</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试批量插入" tabindex="-1"><a class="header-anchor" href="#测试批量插入" aria-hidden="true">#</a> 测试批量插入</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// SQL长度有限制，海量数据插入单条SQL无法实行，</span>
	<span class="token comment">// 因此MP将批量插入放在了通用Service中实现，而不是通用Mapper</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ybc&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//SQL:INSERT INTO t_user ( username, age ) VALUES ( ?, ? )</span>
	userService<span class="token punctuation">.</span><span class="token function">saveBatch</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="常用注解" tabindex="-1"><a class="header-anchor" href="#常用注解" aria-hidden="true">#</a> 常用注解</h1><h2 id="tablename" tabindex="-1"><a class="header-anchor" href="#tablename" aria-hidden="true">#</a> @TableName</h2><blockquote><p>经过以上的测试，在使用MyBatis-Plus实现基本的CRUD时，我们并没有指定要操作的表，只是在 Mapper接口继承BaseMapper时，设置了泛型User，而操作的表为user表</p><p>由此得出结论，MyBatis-Plus在确定操作的表时，由BaseMapper的泛型决定，即实体类型决 定，且默认操作的表名和实体类型的类名一致</p></blockquote><h3 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h3><blockquote><p>若实体类类型的类名和要操作的表的表名不一致，会出现什么问题？</p><p>我们将表user更名为t_user，测试查询功能 程序抛出异常，Table &#39;mybatis_plus.user&#39; doesn&#39;t exist，因为现在的表名为t_user，而默认操作 的表名和实体类型的类名一致，即user表</p></blockquote><h3 id="通过-tablename解决问题" tabindex="-1"><a class="header-anchor" href="#通过-tablename解决问题" aria-hidden="true">#</a> 通过@TableName解决问题</h3><blockquote><p>在实体类类型上添加@TableName(&quot;t_user&quot;)，标识实体类对应的表，即可成功执行SQL语句</p></blockquote><h3 id="通过全局配置解决问题" tabindex="-1"><a class="header-anchor" href="#通过全局配置解决问题" aria-hidden="true">#</a> 通过全局配置解决问题</h3><blockquote><p>在开发的过程中，我们经常遇到以上的问题，即实体类所对应的表都有固定的前缀，例如<code>t_</code>或<code>tbl_ </code></p><p>此时，可以使用MyBatis-Plus提供的全局配置，为实体类所对应的表名设置默认的前缀，那么就不需要在每个实体类上通过@TableName标识实体类对应的表</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
	<span class="token key atrule">configuration</span><span class="token punctuation">:</span>
		<span class="token comment"># 配置MyBatis日志</span>
		<span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl
	<span class="token key atrule">global-config</span><span class="token punctuation">:</span>
		<span class="token key atrule">db-config</span><span class="token punctuation">:</span>
		<span class="token comment"># 配置MyBatis-Plus操作表的默认前缀</span>
			<span class="token key atrule">table-prefix</span><span class="token punctuation">:</span> t_
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="tableid" tabindex="-1"><a class="header-anchor" href="#tableid" aria-hidden="true">#</a> @TableId</h2><blockquote><p>经过以上的测试，MyBatis-Plus在实现CRUD时，会默认将id作为主键列，并在插入数据时，默认基于雪花算法的策略生成id</p></blockquote><h3 id="问题-1" tabindex="-1"><a class="header-anchor" href="#问题-1" aria-hidden="true">#</a> 问题</h3><blockquote><p>若实体类和表中表示主键的不是id，而是其他字段，例如uid，MyBatis-Plus会自动识别uid为主 键列吗？</p><p>我们实体类中的属性id改为uid，将表中的字段id也改为uid，测试添加功能</p><p>程序抛出异常，Field &#39;uid&#39; doesn&#39;t have a default value，说明MyBatis-Plus没有将uid作为主键赋值</p></blockquote><h3 id="通过-tableid解决问题" tabindex="-1"><a class="header-anchor" href="#通过-tableid解决问题" aria-hidden="true">#</a> 通过@TableId解决问题</h3><blockquote><p>在实体类中uid属性上通过@TableId将其标识为主键，即可成功执行SQL语句</p></blockquote><h3 id="tableid的value属性" tabindex="-1"><a class="header-anchor" href="#tableid的value属性" aria-hidden="true">#</a> @TableId的value属性</h3><blockquote><p>若实体类中主键对应的属性为id，而表中表示主键的字段为uid，此时若只在属性id上添加注解 @TableId，则抛出异常Unknown column &#39;id&#39; in &#39;field list&#39;，即MyBatis-Plus仍然会将id作为表的主键操作，而表中表示主键的是字段uid</p><p>此时需要通过@TableId注解的value属性，指定表中的主键字段，@TableId(&quot;uid&quot;)或 @TableId(value=&quot;uid&quot;)</p></blockquote><h3 id="tableid的type属性" tabindex="-1"><a class="header-anchor" href="#tableid的type属性" aria-hidden="true">#</a> @TableId的type属性</h3><blockquote><p>type属性用来定义主键策略</p></blockquote><p><strong>常用的主键策略：</strong></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>IdType.ASSIGN_ID（默 认）</td><td>基于雪花算法的策略生成数据id，与数据库id是否设置自增无关</td></tr><tr><td>IdType.AUTO</td><td>使用数据库的自增策略，注意，该类型请确保数据库设置了id自增， 否则无效</td></tr></tbody></table><p><strong>配置全局主键策略：</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
	<span class="token key atrule">configuration</span><span class="token punctuation">:</span>
		<span class="token comment"># 配置MyBatis日志</span>
		<span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl
	<span class="token key atrule">global-config</span><span class="token punctuation">:</span>
		<span class="token key atrule">db-config</span><span class="token punctuation">:</span>
		<span class="token comment"># 配置MyBatis-Plus操作表的默认前缀</span>
			<span class="token key atrule">table-prefix</span><span class="token punctuation">:</span> t_
			<span class="token comment"># 配置MyBatis-Plus的主键策略</span>
			<span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="雪花算法" tabindex="-1"><a class="header-anchor" href="#雪花算法" aria-hidden="true">#</a> 雪花算法</h3><ul><li>背景</li></ul><p>需要选择合适的方案去应对数据规模的增长，以应对逐渐增长的访问压力和数据量。</p><p>数据库的扩展方式主要包括：业务分库、主从复制，数据库分表</p><ul><li>数据库分表</li></ul><p>将不同业务数据分散存储到不同的数据库服务器，能够支撑百万甚至千万用户规模的业务，但如果业务 继续发展，同一业务的单表数据也会达到单台数据库服务器的处理瓶颈。例如，淘宝的几亿用户数据， 如果全部存放在一台数据库服务器的一张表中，肯定是无法满足性能要求的，此时就需要对单表数据进行拆分。</p><p>单表数据拆分有两种方式：垂直分表和水平分表。示意图如下：</p><p><img src="https://s2.loli.net/2022/09/29/W7vJGN3beoHF6qg.png" alt="Snipaste_2022-09-29_17-59-20.png" loading="lazy"></p><ul><li>垂直分表</li></ul><p>垂直分表适合将表中某些不常用且占了大量空间的列拆分出去。</p><p>例如，前面示意图中的 nickname 和 description 字段，假设我们是一个婚恋网站，用户在筛选其他用户的时候，主要是用 age 和 sex 两个字段进行查询，而 nickname 和 description 两个字段主要用于展示，一般不会在业务查询中用到。description 本身又比较长，因此我们可以将这两个字段独立到另外 一张表中，这样在查询 age 和 sex 时，就能带来一定的性能提升</p><ul><li>水平分表</li></ul><p>水平分表适合表行数特别大的表，有的公司要求单表行数超过 5000 万就必须进行分表，这个数字可以作为参考，但并不是绝对标准，关键还是要看表的访问性能。对于一些比较复杂的表，可能超过 1000 万就要分表了；而对于一些简单的表，即使存储数据超过 1 亿行，也可以不分表。</p><p>但不管怎样，当看到表的数据量达到千万级别时，作为架构师就要警觉起来，因为这很可能是架构的性能瓶颈或者隐患。</p><p>水平分表相比垂直分表，会引入更多的复杂性，例如要求全局唯一的数据id该如何处理</p><blockquote><p>主键自增</p></blockquote><p>①以最常见的用户 ID 为例，可以按照 1000000 的范围大小进行分段，1 ~ 999999 放到表 1中， 1000000 ~ 1999999 放到表2中，以此类推。</p><p>②复杂点：分段大小的选取。分段太小会导致切分后子表数量过多，增加维护复杂度；分段太大可能会导致单表依然存在性能问题，一般建议分段大小在 100 万至 2000 万之间，具体需要根据业务选取合适 的分段大小。</p><p>③优点：可以随着数据的增加平滑地扩充新的表。例如，现在的用户是 100 万，如果增加到 1000 万，只需要增加新的表就可以了，原有的数据不需要动。</p><p>④缺点：分布不均匀。假如按照 1000 万来进行分表，有可能某个分段实际存储的数据量只有 1 条，而另外一个分段实际存储的数据量有 1000 万条</p><blockquote><p>取模</p></blockquote><p>①同样以用户 ID 为例，假如我们一开始就规划了 10 个数据库表，可以简单地用 user_id % 10 的值来表示数据所属的数据库表编号，ID 为 985 的用户放到编号为 5 的子表中，ID 为 10086 的用户放到编号为 6 的子表中。</p><p>②复杂点：初始表数量的确定。表数量太多维护比较麻烦，表数量太少又可能导致单表性能存在问题。</p><p>③优点：表分布比较均匀。</p><p>④缺点：扩充新的表很麻烦，所有数据都要重分布</p><blockquote><p>雪花算法</p></blockquote><p>雪花算法是由Twitter公布的分布式主键生成算法，它能够保证不同表的主键的不重复性，以及相同表的 主键的有序性。</p><p>①核心思想：</p><p>长度共64bit（一个long型）。</p><p>首先是一个符号位，1bit标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，所以id一般是正数，最高位是0。</p><p>41bit时间截(毫秒级)，存储的是时间截的差值（当前时间截 - 开始时间截)，结果约等于69.73年。</p><p>10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID，可以部署在1024个节点）。</p><p>12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID）</p><p><img src="https://s2.loli.net/2022/09/29/1cwoj5uZf97JlYg.png" alt="Snipaste_2022-09-29_18-03-18.png" loading="lazy"></p><p>②优点：整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞，并且效率较高。</p><h2 id="tablefield" tabindex="-1"><a class="header-anchor" href="#tablefield" aria-hidden="true">#</a> @TableField</h2><blockquote><p>经过以上的测试，我们可以发现，MyBatis-Plus在执行SQL语句时，要保证实体类中的属性名和 表中的字段名一致</p><p>如果实体类中的属性名和字段名不一致的情况，会出现什么问题呢？</p></blockquote><h3 id="情况1" tabindex="-1"><a class="header-anchor" href="#情况1" aria-hidden="true">#</a> 情况1</h3><blockquote><p>若实体类中的属性使用的是驼峰命名风格，而表中的字段使用的是下划线命名风格</p><p>例如实体类属性userName，表中字段user_name 此时MyBatis-Plus会自动将下划线命名风格转化为驼峰命名风格</p><p>相当于在MyBatis中配置</p></blockquote><h3 id="情况2" tabindex="-1"><a class="header-anchor" href="#情况2" aria-hidden="true">#</a> 情况2</h3><blockquote><p>若实体类中的属性和表中的字段不满足情况1</p><p>例如实体类属性name，表中字段username</p><p>此时需要在实体类属性上使用@TableField(&quot;username&quot;)设置属性所对应的字段名</p></blockquote><h2 id="tablelogic" tabindex="-1"><a class="header-anchor" href="#tablelogic" aria-hidden="true">#</a> @TableLogic</h2><h3 id="逻辑删除" tabindex="-1"><a class="header-anchor" href="#逻辑删除" aria-hidden="true">#</a> 逻辑删除</h3><ul><li>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除的数据</li><li>逻辑删除：假删除，将对应数据中代表是否被删除字段的状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</li><li>使用场景：可以进行数据恢复</li></ul><h3 id="实现逻辑删除" tabindex="-1"><a class="header-anchor" href="#实现逻辑删除" aria-hidden="true">#</a> 实现逻辑删除</h3><blockquote><p>step1：数据库中创建逻辑删除状态列，设置默认值为0</p></blockquote><blockquote><p>step2：实体类中添加逻辑删除属性@TableLogic</p></blockquote><blockquote><p>step3：测试</p><p>测试删除功能，真正执行的是修改</p><p>UPDATE t_user SET is_deleted=1 WHERE id=? AND is_deleted=0</p><p>测试查询功能，被逻辑删除的数据默认不会被查询</p><p>SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Yuejia-Lai/library/edit/main/develop/MyBatis Plus/chapter2.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/11/9 19:46:18</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 2662656815@qq.com">laiyuejia</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/develop/MyBatis%20Plus/chapter1.html" class="nav-link prev" aria-label="MyBatis-Plus简介与入门案例"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><span class="icon iconfont icon-sharpicons_database-center"></span>MyBatis-Plus简介与入门案例</div></a><a href="/develop/MyBatis%20Plus/chapter3.html" class="nav-link next" aria-label="条件构造器与常用接口和插件"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">条件构造器与常用接口和插件<span class="icon iconfont icon-sharpicons_database-center"></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">版权所有，转载请注明出处！  <a href=https://beian.miit.gov.cn/#/Integrated/index target=_blank>渝ICP备2022006471</a></div><!----></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.d6224ea7.js" defer></script>
  </body>
</html>
